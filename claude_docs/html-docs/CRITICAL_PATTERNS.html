<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üö® CRITICAL PATTERNS - MUST READ FIRST</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-dark.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
</head>
<body data-theme="dark">
    <div class="container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <!-- Theme Toggle Button -->
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
                <i class="bi bi-moon-fill" id="theme-icon"></i>
                <span id="theme-text">Dark</span>
            </button>
            
            <h3><i class="bi bi-exclamation-triangle"></i> Critical Patterns</h3>
            <ul>
                <li><a href="#xos-framework-warning"><i class="bi bi-exclamation-triangle-fill"></i> Framework Warning</a></li>
                <li><a href="#xos-component-checklist"><i class="bi bi-check-square"></i> Component Checklist</a></li>
                <li><a href="#database-patterns"><i class="bi bi-database"></i> Database Patterns</a></li>
                <li><a href="#state-updates"><i class="bi bi-arrow-repeat"></i> State Updates</a></li>
                <li><a href="#api-patterns"><i class="bi bi-cloud"></i> API Patterns</a></li>
            </ul>
            
            <h3><i class="bi bi-tools"></i> Implementation</h3>
            <ul>
                <li><a href="#jquery-dependency"><i class="bi bi-code-square"></i> jQuery Dependency</a></li>
                <li><a href="#transaction-patterns"><i class="bi bi-arrow-left-right"></i> Transactions</a></li>
                <li><a href="#api-calls"><i class="bi bi-telephone"></i> API Calls</a></li>
                <li><a href="#multi-tenant"><i class="bi bi-building"></i> Multi-Tenant</a></li>
                <li><a href="#bootstrap-hybrid"><i class="bi bi-palette"></i> Bootstrap Hybrid</a></li>
            </ul>
            
            <h3><i class="bi bi-check-circle"></i> Validation</h3>
            <ul>
                <li><a href="#validation-checklist"><i class="bi bi-clipboard-check"></i> Quick Checklist</a></li>
                <li><a href="#reading-order"><i class="bi bi-book"></i> Reading Order</a></li>
                <li><a href="#common-pitfalls"><i class="bi bi-exclamation-octagon"></i> Common Pitfalls</a></li>
                <li><a href="#quick-navigation"><i class="bi bi-compass"></i> Navigation</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">

            <h1><i class="bi bi-exclamation-triangle-fill"></i> üö® CRITICAL PATTERNS - MUST READ FIRST</h1>

            <div class="alert alert-critical" id="xos-framework-warning">
                <h2>‚ö†Ô∏è This is NOT a Standard ASP.NET Core + React Application</h2>
                <p><strong>Applications built with the custom XOS enterprise framework significantly modify standard patterns.</strong> Following standard React or ASP.NET Core patterns will cause errors.</p>
            </div>

            <section id="xos-component-checklist">
                <h2>üî¥ XOS Component Implementation Checklist (100% ACCURACY)</h2>
                
                <div class="alert alert-success">
                    <h3>‚úÖ MUST DO - Complete this checklist for EVERY XOS component:</h3>
                </div>

                <div class="collapsible expanded">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>1. Install Dependencies & Setup (ONE TIME)</h3>
                        <span class="collapsible-toggle">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="code-block">
                            <div class="code-header">
                                <span>Bash Commands</span>
                                <button class="copy-btn" onclick="copyCode(this, 'install-deps')">Copy</button>
                            </div>
                            <pre><code class="language-bash" id="install-deps"># 1. Install Dependencies (ONE TIME)
cd CVS_Claude.WebApi/UIPages
npm install react-color fast-sort --save

# 2. Copy Theme CSS (ONE TIME)
cp D:\Projects\CVS_Claude\assets\css\theme.css D:\Projects\CVS_Claude\CVS_Claude.WebApi\UIPages\src\theme.css</code></pre>
                        </div>
                    </div>
                </div>

                <div class="collapsible expanded">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>2. Import Pattern (EVERY COMPONENT)</h3>
                        <span class="collapsible-toggle">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="code-block">
                            <div class="code-header">
                                <span>JavaScript - Correct Import</span>
                                <button class="copy-btn" onclick="copyCode(this, 'correct-import')">Copy</button>
                            </div>
                            <pre><code class="language-javascript" id="correct-import">// ‚úÖ CORRECT
import * as cntrl from '../../xos-components';

// ‚ùå WRONG - Don't use this!
// import { XOSComponent } from '../../xos-components/XOSComponent.js';</code></pre>
                        </div>
                    </div>
                </div>

                <div class="collapsible expanded">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>3. Component Class Pattern</h3>
                        <span class="collapsible-toggle">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="code-block">
                            <div class="code-header">
                                <span>JavaScript - Component Class</span>
                                <button class="copy-btn" onclick="copyCode(this, 'component-class')">Copy</button>
                            </div>
                            <pre><code class="language-javascript" id="component-class">// ‚úÖ CORRECT Component Pattern
export class MyComponent extends cntrl.XOSComponent {
    constructor(props) {
        super(props, new MyComponentVM(props));  // Pass VM to super
    }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="collapsible expanded">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>4. ViewModel State Initialization (CRITICAL!)</h3>
                        <span class="collapsible-toggle">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="code-block">
                            <div class="code-header">
                                <span>JavaScript - ViewModel Pattern</span>
                                <button class="copy-btn" onclick="copyCode(this, 'viewmodel-init')">Copy</button>
                            </div>
                            <pre><code class="language-javascript" id="viewmodel-init">export default class MyComponentVM extends VMBase {
    constructor(props) {
        super(props);
        this.init();
    }
    
    init() {
        // ‚ö†Ô∏è CRITICAL: Get reference to Data, then set properties!
        const model = this.Data;     // Get reference to _____state
        model.userName = '';         // ‚úÖ CORRECT - Set on reference
        
        // ‚ùå ERROR: Cannot set Data directly!
        // this.Data = { userName: '' };
    }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="collapsible expanded">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>5. Event Handlers (MEMORIZE THIS PATTERN!)</h3>
                        <span class="collapsible-toggle">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="code-block">
                            <div class="code-header">
                                <span>JavaScript - Event Handler Pattern</span>
                                <button class="copy-btn" onclick="copyCode(this, 'event-handler')">Copy</button>
                            </div>
                            <pre><code class="language-javascript" id="event-handler">// üìù MEMORIZE: 3-Step Event Handler Pattern for XOS
handleInputChange = (e) => {
    if (this.VM) {
        const model = this.VM.Data;  // Step 1: Get reference to _____state
        model[e.name] = e.value;     // Step 2: Modify property (e.value NOT e.target.value!)
        this.VM.updateUI();          // Step 3: Trigger re-render (NEVER FORGET THIS!)
    }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="collapsible expanded">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>6. XOSTextbox Usage Pattern</h3>
                        <span class="collapsible-toggle">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="code-block">
                            <div class="code-header">
                                <span>JSX - XOSTextbox Pattern</span>
                                <button class="copy-btn" onclick="copyCode(this, 'xos-textbox')">Copy</button>
                            </div>
                            <pre><code class="language-jsx" id="xos-textbox">&lt;cntrl.XOSTextbox
    name="userName"  // ‚ö†Ô∏è CRITICAL: name prop for e.name in handler!
    value={this.VM.Data.userName || ''}
    onChange={this.handleInputChange}
    inputType={cntrl.XOSTextboxTypes.textbox}  // or .password
    mandatory={true}
/&gt;</code></pre>
                        </div>
                    </div>
                </div>

                <div class="collapsible expanded">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>7. Button Implementation</h3>
                        <span class="collapsible-toggle">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="code-block">
                            <div class="code-header">
                                <span>JSX - Button Pattern</span>
                                <button class="copy-btn" onclick="copyCode(this, 'button-pattern')">Copy</button>
                            </div>
                            <pre><code class="language-jsx" id="button-pattern">&lt;button className="btn btn-primary"&gt;  {/* ‚úÖ HTML button with Bootstrap */}
    &lt;i className="fa fa-save"&gt;&lt;/i&gt; Save  {/* ‚úÖ fa NOT fas */}
&lt;/button&gt;</code></pre>
                        </div>
                    </div>
                </div>

                <div class="collapsible expanded">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>8. Theme Import (App.js ONLY)</h3>
                        <span class="collapsible-toggle">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="code-block">
                            <div class="code-header">
                                <span>JavaScript - Theme Import</span>
                                <button class="copy-btn" onclick="copyCode(this, 'theme-import')">Copy</button>
                            </div>
                            <pre><code class="language-javascript" id="theme-import">// ‚úÖ In App.js after copying to src/
import './theme.css';</code></pre>
                        </div>
                    </div>
                </div>

                <div class="alert alert-danger">
                    <h3>‚ùå NEVER DO - These will break XOS components:</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>JavaScript - WRONG Patterns</span>
                            <button class="copy-btn" onclick="copyCode(this, 'wrong-patterns')">Copy</button>
                        </div>
                        <pre><code class="language-javascript" id="wrong-patterns">// ‚ùå WRONG imports
import { XOSComponent } from '../../xos-components/XOSComponent.js';
import '../../../assets/css/theme.css';  // Can't import outside src/

// ‚ùå WRONG event handling
handleChange(event) {
    this.VM.setValue(event.target.value);  // Won't work with XOSTextbox
}

// ‚ùå WRONG icon classes
&lt;i className="fas fa-user"&gt;&lt;/i&gt;  // Use 'fa' not 'fas'

// ‚ùå WRONG - Looking for XOSButton
&lt;cntrl.XOSButton&gt;  // Doesn't exist for UI</code></pre>
                    </div>
                </div>
            </section>

            <section id="database-patterns">
                <h2>üî¥ Database Access Pattern (CRITICAL)</h2>
                
                <div class="alert alert-success">
                    <h3>‚úÖ CORRECT Pattern - MUST USE</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>C# - Database Access Pattern</span>
                            <button class="copy-btn" onclick="copyCode(this, 'correct-db')">Copy</button>
                        </div>
                        <pre><code class="language-csharp" id="correct-db">await db.GetEntityDataListAsync&lt;T&gt;(query, params, (row) => {
    return new T {
        ID = row.GetValue&lt;int&gt;("id"),
        Name = row.GetValue&lt;string&gt;("name", "default")
    };
});</code></pre>
                    </div>
                </div>

                <div class="alert alert-danger">
                    <h3>‚ùå WRONG Pattern - Will Cause Runtime Errors</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>C# - WRONG Database Patterns</span>
                            <button class="copy-btn" onclick="copyCode(this, 'wrong-db')">Copy</button>
                        </div>
                        <pre><code class="language-csharp" id="wrong-db">// DO NOT USE standard ADO.NET patterns
row["id"]           // ‚ùå WRONG
row.GetInt32(0)     // ‚ùå WRONG</code></pre>
                    </div>
                </div>
            </section>

            <section id="state-updates">
                <h2>üî¥ Frontend State Updates (CRITICAL)</h2>
                
                <div class="alert alert-success">
                    <h3>‚úÖ CORRECT Pattern - Manual Updates Required</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>JavaScript - State Update Pattern</span>
                            <button class="copy-btn" onclick="copyCode(this, 'correct-state')">Copy</button>
                        </div>
                        <pre><code class="language-javascript" id="correct-state">// In ViewModel
onChange = (prop, val) => {
    this.Data.Input[prop] = val;  // Direct mutation
    this.updateUI();  // MANDATORY - UI won't update without this
}

// In Component
handleChange = () => {
    this.VM.Data.value = newValue;
    this.VM.updateUI();  // REQUIRED for UI to reflect changes
}</code></pre>
                    </div>
                </div>

                <div class="alert alert-danger">
                    <h3>‚ùå WRONG Pattern - UI Won't Update</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>JavaScript - WRONG State Patterns</span>
                            <button class="copy-btn" onclick="copyCode(this, 'wrong-state')">Copy</button>
                        </div>
                        <pre><code class="language-javascript" id="wrong-state">// These patterns will NOT work
this.setState({ value: newValue });  // NO - XOS doesn't use setState for data
const [value, setValue] = useState();  // NO - No hooks in XOS components
this.Data.property = value;  // NO - Missing updateUI() call</code></pre>
                    </div>
                </div>
            </section>

            <section id="api-patterns">
                <h2>üî¥ API Pattern - 95% POST Only</h2>
                
                <div class="alert alert-success">
                    <h3>‚úÖ CORRECT Pattern</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>C# - API Controller Pattern</span>
                            <button class="copy-btn" onclick="copyCode(this, 'correct-api')">Copy</button>
                        </div>
                        <pre><code class="language-csharp" id="correct-api">[HttpPost("Save")]  // Always POST, even for reads
public async Task&lt;DomainType&gt; SaveAsync([FromBody] Input input)
{
    // Return domain type directly, not IActionResult
    return domainObject;
}

[HttpPost("GetList")]  // POST for getting data
public async Task&lt;List&lt;Item&gt;&gt; GetListAsync([FromBody] SearchParams params)
{
    return items;
}</code></pre>
                    </div>
                </div>

                <div class="alert alert-danger">
                    <h3>‚ùå WRONG Pattern</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>C# - WRONG API Patterns</span>
                            <button class="copy-btn" onclick="copyCode(this, 'wrong-api')">Copy</button>
                        </div>
                        <pre><code class="language-csharp" id="wrong-api">[HttpGet]     // ‚ùå NO - Use POST
[HttpPut]     // ‚ùå NO - Use POST  
[HttpDelete]  // ‚ùå NO - Use POST
public IActionResult Get()  // ‚ùå NO - Return domain types directly</code></pre>
                    </div>
                </div>
            </section>

            <section id="jquery-dependency">
                <h2>üî¥ jQuery Dependency (REQUIRED)</h2>
                
                <div class="alert alert-success">
                    <h3>‚úÖ jQuery is MANDATORY</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>JavaScript - jQuery Usage</span>
                            <button class="copy-btn" onclick="copyCode(this, 'jquery-usage')">Copy</button>
                        </div>
                        <pre><code class="language-javascript" id="jquery-usage">// XOS requires jQuery throughout
$('body').addClass('overflow-hidden');
$('.modal').modal('show');
$(this.getRef('input')).val(value);</code></pre>
                    </div>
                </div>

                <div class="alert alert-danger">
                    <h3>‚ùå Cannot Remove jQuery</h3>
                    <ul>
                        <li>XOS framework depends on jQuery</li>
                        <li>Bootstrap components require jQuery</li>
                        <li>Many XOS utilities use jQuery internally</li>
                    </ul>
                </div>
            </section>

            <section id="transaction-patterns">
                <h2>üü† Transaction Pattern with SignalR</h2>
                
                <div class="alert alert-info">
                    <h3>‚úÖ CORRECT Complex Transaction Pattern</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>C# - Transaction with SignalR</span>
                            <button class="copy-btn" onclick="copyCode(this, 'transaction-signalr')">Copy</button>
                        </div>
                        <pre><code class="language-csharp" id="transaction-signalr">using (var dbService = this.GetDBService("CrystalDB", transOwner))
using (var tran = dbService.BeginTransaction())
{
    try
    {
        // Multiple database operations
        await SaveData(dbService);
        
        // Commit before SignalR
        tran.Commit();
        
        // SignalR notifications AFTER commit
        await HubContext.Clients.All.SendAsync("DataUpdated", data);
    }
    catch
    {
        tran.Rollback();
        throw;
    }
}</code></pre>
                    </div>
                </div>
            </section>

            <section id="api-calls">
                <h2>üü† Mixed API Call Patterns</h2>
                
                <div class="collapsible expanded">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>Primary Pattern - Utils.ajax</h3>
                        <span class="collapsible-toggle">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="code-block">
                            <div class="code-header">
                                <span>JavaScript - Utils.ajax Pattern</span>
                                <button class="copy-btn" onclick="copyCode(this, 'utils-ajax')">Copy</button>
                            </div>
                            <pre><code class="language-javascript" id="utils-ajax">// Most common pattern in codebase
Utils.ajax({ 
    url: 'Site/Save',  // Relative URL
    data: this.Data.Input 
}, (resp) => {
    // Handle response
});</code></pre>
                        </div>
                    </div>
                </div>

                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>Secondary Pattern - ApiManager</h3>
                        <span class="collapsible-toggle">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="code-block">
                            <div class="code-header">
                                <span>JavaScript - ApiManager Pattern</span>
                                <button class="copy-btn" onclick="copyCode(this, 'api-manager')">Copy</button>
                            </div>
                            <pre><code class="language-javascript" id="api-manager">// Used in some components
ApiManager.post('/api/Site/Save', this.Data.Input)
    .then(resp => {
        // Handle response
    });</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <section id="multi-tenant">
                <h2>üü† Multi-Tenant Database Configuration</h2>
                
                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>Connection String Pattern</h3>
                        <span class="collapsible-toggle">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="code-block">
                            <div class="code-header">
                                <span>JSON - Connection Configuration</span>
                                <button class="copy-btn" onclick="copyCode(this, 'connection-config')">Copy</button>
                            </div>
                            <pre><code class="language-json" id="connection-config">{
  "CrystalDB": {
    "ConnectionString": "Host=localhost;Database=crystaldb;",
    "Keys": ["1", "MG"]  // Client routing keys
  },
  "CrystalDB2": {
    "ConnectionString": "Host=localhost;Database=crystaldb2;",
    "Keys": ["2", "WB"]  // Different client keys
  }
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <section id="bootstrap-hybrid">
                <h2>üü° Bootstrap + XOS Hybrid</h2>
                
                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>Mixed Component Usage</h3>
                        <span class="collapsible-toggle">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="code-block">
                            <div class="code-header">
                                <span>JSX - Bootstrap + XOS Components</span>
                                <button class="copy-btn" onclick="copyCode(this, 'bootstrap-xos')">Copy</button>
                            </div>
                            <pre><code class="language-jsx" id="bootstrap-xos">// XOS components
&lt;XOSButton /&gt;
&lt;XOSGrid /&gt;

// Bootstrap classes (required)
&lt;div className="modal-dialog modal-xl"&gt;
&lt;button className="btn btn-primary"&gt;
&lt;div className="col-md-6"&gt;</code></pre>
                        </div>
                    </div>
                </div>

                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>File Upload Pattern</h3>
                        <span class="collapsible-toggle">‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <div class="code-block">
                            <div class="code-header">
                                <span>C# - Mixed JSON + Files</span>
                                <button class="copy-btn" onclick="copyCode(this, 'file-upload')">Copy</button>
                            </div>
                            <pre><code class="language-csharp" id="file-upload">[HttpPost("Upload")]
public async Task&lt;Result&gt; UploadAsync(
    [FromBody] JsonData data,  // JSON from body
    List&lt;IFormFile&gt; files)     // Files from form
{
    // Handle both JSON and files
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <section id="validation-checklist">
                <h2>‚úÖ Quick Validation Checklist</h2>
                
                <div class="alert alert-info">
                    <h3>Before running your code, verify:</h3>
                    <ol>
                        <li>‚úÖ Database reads use <code>row.GetValue&lt;T&gt;("column")</code></li>
                        <li>‚úÖ All state changes call <code>updateUI()</code></li>
                        <li>‚úÖ API endpoints use POST</li>
                        <li>‚úÖ Controllers return domain types directly</li>
                        <li>‚úÖ jQuery is included and available</li>
                        <li>‚úÖ Transactions commit before SignalR calls</li>
                        <li>‚úÖ Frontend uses Utils.ajax for API calls</li>
                        <li>‚úÖ Bootstrap classes are used for layout</li>
                    </ol>
                </div>
            </section>

            <section id="reading-order">
                <h2>üìö Essential Reading Order</h2>
                
                <div class="nav-grid">
                    <div class="nav-card">
                        <h4>Required Reading Sequence</h4>
                        <ol>
                            <li><strong>This Document</strong> (CRITICAL_PATTERNS.md)</li>
                            <li><strong>XOS Framework Guide</strong> (frontend/xos-framework.md)</li>
                            <li><strong>Backend Blueprint</strong> (backend/backend-blueprint.md)</li>
                            <li><strong>Database Schema</strong> (database/database-schema.md)</li>
                        </ol>
                    </div>
                </div>
            </section>

            <section id="common-pitfalls">
                <h2>‚ö†Ô∏è Common Pitfalls to Avoid</h2>
                
                <div class="alert alert-warning">
                    <ol>
                        <li><strong>Don't use React hooks</strong> - XOS components don't support them</li>
                        <li><strong>Don't use Entity Framework</strong> - Use XOS data framework</li>
                        <li><strong>Don't create RESTful APIs</strong> - Use POST pattern</li>
                        <li><strong>Don't expect automatic UI updates</strong> - Call updateUI()</li>
                        <li><strong>Don't remove jQuery</strong> - It's required everywhere</li>
                        <li><strong>Don't use IActionResult</strong> - Return domain types</li>
                        <li><strong>Don't use standard React state</strong> - Use VM.Data pattern</li>
                    </ol>
                </div>
            </section>

            <section id="quick-navigation">
                <h2>üß≠ Quick Navigation</h2>
                
                <div class="nav-grid">
                    <div class="nav-card">
                        <h4>Essential Documentation</h4>
                        <ul>
                            <li><a href="../../index.html">‚Üê Back to claude_docs</a> - Main documentation hub</li>
                            <li><a href="MODULE-DEVELOPMENT-GUIDE.html">Module Development Guide</a> - Complete workflows</li>
                            <li><a href="CLAUDE-PROMPT-QUICK-REFERENCE.html">Quick Reference Prompts</a> - Copy-paste prompts</li>
                        </ul>
                    </div>
                    <div class="nav-card">
                        <h4>Frontend Resources</h4>
                        <ul>
                            <li><a href="xos-input-handling-fix.html">XOS Input Fix</a> - Fix typing issues</li>
                            <li><a href="#bootstrap-hybrid">Backend Blueprint</a> - API patterns</li>
                            <li><a href="SETUP.html">Setup Guide</a> - Environment setup</li>
                        </ul>
                    </div>
                </div>
                
                <div class="alert alert-success">
                    <p><em><strong>This document contains the most critical patterns that differ from standard development. Master these before proceeding with any implementation.</strong></em></p>
                </div>
            </section>

            <div class="footer">
                <p><em>Documentation Version: 2.1.0</em><br>
                <em>Last Updated: August 21, 2025</em><br>
                <em>Maintainer: Development Team</em></p>
                
                <p><strong>üö® CRITICAL:</strong> These patterns are mandatory for XOS framework compatibility. Standard React/ASP.NET patterns will cause runtime errors.</p>
            </div>
        </main>
    </div>

    <script>
        // Copy code functionality
        function copyCode(button, codeId) {
            const codeElement = document.getElementById(codeId);
            const text = codeElement.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.classList.add('copied');
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.classList.remove('copied');
                }, 2000);
            });
        }

        // Collapsible sections
        function toggleCollapsible(header) {
            const collapsible = header.parentElement;
            collapsible.classList.toggle('expanded');
        }

        // Search functionality
        function highlightText(text, searchTerm) {
            if (!searchTerm) return text;
            const regex = new RegExp(`(${searchTerm})`, 'gi');
            return text.replace(regex, '<span class="highlight">$1</span>');
        }

        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const content = document.querySelector('.main-content');
            const sections = content.querySelectorAll('section, h2, h3, p, li, td, code');
            
            // Remove previous highlights
            sections.forEach(section => {
                section.innerHTML = section.innerHTML.replace(/<span class="highlight">(.*?)<\/span>/gi, '$1');
            });
            
            if (searchTerm.length > 2) {
                sections.forEach(section => {
                    const text = section.textContent.toLowerCase();
                    if (text.includes(searchTerm)) {
                        section.innerHTML = highlightText(section.innerHTML, searchTerm);
                    }
                });
            }
        });

        // Mobile sidebar toggle
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('open');
        }

        // Add mobile menu button for smaller screens
        if (window.innerWidth <= 768) {
            const menuButton = document.createElement('button');
            menuButton.innerHTML = '‚ò∞ Menu';
            menuButton.CRITICAL_PATTERNS.cssText = 'position: fixed; top: 1rem; left: 1rem; z-index: 200; padding: 0.5rem; background: var(--primary-color); color: white; border: none; border-radius: 0.25rem; cursor: pointer;';
            menuButton.onclick = toggleSidebar;
            document.body.appendChild(menuButton);
        }

        // Auto-expand sections with search results
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            if (searchTerm.length > 2) {
                document.querySelectorAll('.collapsible').forEach(collapsible => {
                    const text = collapsible.textContent.toLowerCase();
                    if (text.includes(searchTerm)) {
                        collapsible.classList.add('expanded');
                    }
                });
            }
        });

        // Theme Toggle Functionality
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');
            const themeText = document.getElementById('theme-text');
            const currentTheme = body.getAttribute('data-theme');
            
            if (currentTheme === 'dark') {
                body.setAttribute('data-theme', 'light');
                themeIcon.className = 'bi bi-sun-fill';
                themeText.textContent = 'Light';
                localStorage.setItem('preferred-theme', 'light');
            } else {
                body.setAttribute('data-theme', 'dark');
                themeIcon.className = 'bi bi-moon-fill';
                themeText.textContent = 'Dark';
                localStorage.setItem('preferred-theme', 'dark');
            }
        }

        // Load saved theme preference or default to dark
        function loadTheme() {
            const savedTheme = localStorage.getItem('preferred-theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = savedTheme || (prefersDark ? 'dark' : 'light');
            
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');
            const themeText = document.getElementById('theme-text');
            
            body.setAttribute('data-theme', theme);
            
            if (theme === 'light') {
                themeIcon.className = 'bi bi-sun-fill';
                themeText.textContent = 'Light';
            } else {
                themeIcon.className = 'bi bi-moon-fill';
                themeText.textContent = 'Dark';
            }
        }

        // Initialize theme on page load
        document.addEventListener('DOMContentLoaded', loadTheme);

        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
            if (!localStorage.getItem('preferred-theme')) {
                loadTheme();
            }
        });
    </script>
</body>
</html>